<div id="player_div">
<%= link_to "Add player", new_player_path %>
<table id="player_table">
  <tr>
    <th>Rank</th>
    <th>Player</th>
    <th>Points</th>
    <th>Games</th>
  </tr>
  <% @players.each_with_index do |player, i| %>
    <tr>
      <td><%= player.rank %>
      <td><%= player.name_with_code %></td>
      <td><%= player.points %></td>
      <td><%= player.games_played %></td>
    </tr>
  <% end %>
</table>
</div>

<div id="matches_div">
<%= link_to "Record match", new_match_path %>
<table id="matches_table">
  <tr>
    <th>Date</th>
    <th>Winner</th>
    <th>Loser</th>
  </tr>
  <% @matches.each do |match| %>
    <tr>
      <td><%= match.time.strftime( "%b %d" ) %></td>
      <td>
      <%= match.winner.name %>
      <%= content_tag :span, :class => match.winner_points >= 0 ? "positive" : "negative" do %>
        (<%= match.winner_points >= 0 ? "+" : "" %><%= match.winner_points %>)
      <% end %>
      </td>
      <td>
      <%= match.loser.name %>
      <%= content_tag :span, :class => match.loser_points >= 0 ? "positive" : "negative" do %>
        (<%= match.loser_points >= 0 ? "+" : "" %><%= match.loser_points %>)
      <% end %>
      </td>
    </tr>
  <% end %>
</table>
</div>